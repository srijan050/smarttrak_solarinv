# SmartTrak_SolarInv

This repository contains the solar inverter modeling for Physics-Informed Neural Networks (PINNs) designed for Smarttrak AI. The main goal is to integrate physical laws into neural network models for more robust predictions, especially useful in scenarios involving sensor faults.

## Physics-Informed Neural Networks (PINNs)

Physics-Informed Neural Networks incorporate the physical laws governing the system into the neural network's loss function. Along with the traditional loss (difference between predicted and ground truth values), an additional "physics loss" is included to enforce the physical constraints.

### Example: Ohm's Law in a Neural Network
For instance, in a neural network predicting current (`I`) given voltage (`V`) and resistance (`R`), typical training would involve adjusting weights and biases using sensor data. However, this approach may lack relevance to the real-world scenario as it ignores fundamental physical laws like Ohm's law (`V = IR`).

In a PINN, we introduce an additional loss based on the physics:
- **Physics Loss:** `V - IR`, should ideally be zero.
- **Total Loss:** `a * data_loss + b * physics_loss`, where `0 <= a, b <= 1` and `a + b = 1`.

This dual loss system allows the network to not only rely on sensor data but also conform to physical laws, making it more reliable in case of faulty sensor inputs.

## Solar Inverter
A solar inverter converts DC power (from solar panels) to AC power, which can be used by home appliances. The DC power is generated by the solar PV panels when sunlight produces free electrons, resulting in a current.

### Working of Solar Inverter
- **Conversion to AC:** The DC power needs to be converted to AC, which is done through pulse-width modulation. This technique rapidly switches the direction of the DC current to mimic an AC waveform.
  
Key components in a solar inverter:
1. **MPPT Control:** Finds the point on the PV panel's I-V curve that maximizes power output.
2. **DC-DC Converter:** Adjusts the DC voltage to the desired level using a transformer.
3. **IGBT Control:** Rapid switches that change the direction of the DC current to produce an AC-like current (often a square wave).
4. **EMI Filter:** Converts the square wave into a more sinusoidal form using capacitors, making the power suitable for use by appliances.

## My Approach
To create a physics model for the inverter, I started with a basic efficiency model.

### 1. [1st_98eff.ipynb]
In this model:
- `P_DC = V_DC * I_DC` (where `I_DC` is the sum of currents from all SMBs).
- `P_AC = efficiency * P_DC`.
- Assumed a standard AC phase voltage of 240V.
- Calculated phase current: `I_phase = P_AC / (3 * power_factor * V_phase)`.

### 2. [2nd_effcurve.ipynb]
To address efficiency calculation, I used the manufacturer's efficiency curve based on load percentage and `V_DC`. Using this, I derived the valid efficiency for different conditions and calculated the corresponding `P_AC`.

### 3. [3rd_misc_temp_plots.ipynb]
Plotted ambient, IGBT, and heatsink temperatures against efficiency. While temperature could affect efficiency, I couldn't derive a conclusive relationship. Itâ€™s possible that temperature effects are already factored into the manufacturer's efficiency curve.

### 4. [4th_model_outline.ipynb]
- Modeled a randomized I-V curve for the PV panel in the absence of real data.
- Implemented:
  1. **MPPT:** Incremented/decremented `V_DC` to find the point on the I-V curve where power output is maximized.
  2. **EMI Filter:** Used a low-pass filter to convert the square wave from the IGBT to a more sinusoidal wave.

## Improvements
This is an initial model, and further improvements can be made with access to detailed I-V characteristics and other specific parameters.
